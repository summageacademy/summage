<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Summage — IELTS Reading Lesson</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
<style>
  :root{
    --brand-1: #f24b0b;
    --brand-2: #06a87c;
    --lofi-black: #2f2f2f;
    --muted: #6f777b;
    --bg: #fbfdfb;           /* day background (flat) */
    --card: #ffffff;
    --p-line-bg: #f6f7f6;
    --pager-bg: #fbfdfb;
    --radius: 14px;
    --transition-fast: 180ms;
  }

  /* DARK THEME OVERRIDES - toggled by adding .dark to <body> */
  body.dark{
    --lofi-black: #e6eef0;
    --muted: #a9b3b6;
    --bg: #0b0f12;           /* dark lofi background (flat) — NO GRADIENT */
    --card: #0f1316;
    --p-line-bg: #111417;
    --pager-bg: #0f1517;
  }

  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;
    font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    background: var(--bg);
    color:var(--lofi-black);
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
    display:flex;
    justify-content:center;
    padding:20px;
    transition: background var(--transition-fast), color var(--transition-fast);
  }

  .viewport{
    width:100%;
    max-width:820px;
    display:flex;
    flex-direction:column;
    gap:18px;
  }

  /* NAVBAR */
  .navbar{
    position:sticky;
    top:0;
    z-index:60;
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:12px;
    padding:10px 14px;
    background: var(--card);
    border-radius:12px;
    box-shadow: 0 8px 20px rgba(18,24,26,0.04);
    transition: background var(--transition-fast), box-shadow var(--transition-fast);
  }
  .brand{
    display:flex;
    gap:12px;
    align-items:center;
  }
  .logo {
    width:48px;
    height:48px;
    border-radius:10px;
    overflow:hidden;
    display:grid;
    place-items:center;
    background: linear-gradient(135deg,var(--brand-1),var(--brand-2));
    box-shadow: 0 8px 18px rgba(2,8,6,0.04);
    flex-shrink:0;
  }
  .logo img{width:100%;height:100%;object-fit:cover;display:block}
  .brand h1{
    font-size:18px;margin:0;color:var(--lofi-black);
    transition: color var(--transition-fast);
  }
  .brand small{display:block;color:var(--muted);font-size:12px;transition:color var(--transition-fast)}

  .nav-action{
    display:flex;
    gap:10px;
    align-items:center;
  }
  .btn-back{
    background: linear-gradient(90deg,var(--brand-1),var(--brand-1));
    color:white;border:0;padding:8px 12px;border-radius:10px;font-weight:600;cursor:pointer;
    box-shadow: 0 8px 22px rgba(242,75,11,0.08);
  }

  /* lesson card */
  .lesson-card{
    background:var(--card);
    border-radius:16px;
    padding:18px;
    box-shadow: 0 18px 40px rgba(19,28,30,0.04);
    display:flex;
    flex-direction:column;
    gap:14px;
    transition: background var(--transition-fast), color var(--transition-fast);
  }

  .lesson-meta{
    display:flex;
    gap:14px;
    align-items:center;
  }
  .lesson-title{
    font-size:20px;font-weight:700;margin:0;color:var(--lofi-black);
    transition: color var(--transition-fast);
  }
  .lesson-desc{color:var(--muted);font-size:14px;margin:0;transition: color var(--transition-fast)}

  /* Reading */
  .reading{
    display:flex;flex-direction:column;gap:12px;
    margin-top:6px;
  }
  .p-line{
    background: var(--p-line-bg);
    padding:14px 16px;border-radius:12px; font-size:16px; line-height:1.7; color:var(--lofi-black);
    border:1px solid rgba(10,10,10,0.02);
    transition: background var(--transition-fast), color var(--transition-fast);
  }

  /* Question & choices */
  .question{
    margin-top:6px;font-weight:700;font-size:16px;color:var(--lofi-black);
  }
  .choices{display:flex;flex-direction:column;gap:10px;margin-top:10px}
  .choice{
    display:flex;align-items:center;gap:12px;padding:12px;border-radius:10px;
    background: var(--card);border:1px solid rgba(10,10,10,0.04);cursor:pointer;transition:all .12s, background var(--transition-fast);
  }
  .choice:hover{transform:translateY(-2px)}
  .fakebox{width:22px;height:22px;border-radius:6px;border:2px solid rgba(10,10,10,0.06); display:grid;place-items:center;flex-shrink:0}
  .choice.selected{border-color:rgba(6,168,124,0.12);background:linear-gradient(90deg, rgba(6,168,124,0.03), rgba(242,75,11,0.01))}
  .choice.correct{background: linear-gradient(90deg, rgba(111,207,152,0.14), rgba(111,207,152,0.06));border-color: rgba(6,168,124,0.14)}
  .choice.incorrect{background: linear-gradient(90deg, rgba(255,75,110,0.06), rgba(255,75,110,0.03)); border-color: rgba(242,75,11,0.12)}

  /* pager */
  .pager {
    margin-left:auto;
    color:var(--muted);
    font-size:13px;
    padding:6px 8px;
    border-radius:9px;
    background: var(--pager-bg);
    border:1px solid rgba(10,10,10,0.02);
    transition: background var(--transition-fast), color var(--transition-fast);
  }

  /* final */
  .final{
    display:none;flex-direction:column;align-items:center;gap:12px;padding:18px;border-radius:12px;background:#f7faf7;border:1px solid rgba(10,10,10,0.02)
  }
  
  .final.show{display:flex}
  .final-icon{width:84px;height:84px;border-radius:16px;background:linear-gradient(180deg,#ffffff, rgba(6,168,124,0.05));display:grid;place-items:center}

  /* FLOATING THEME-TOGGLE BUTTON */
  .theme-toggle {
    position:fixed;
    right:20px;
    bottom:20px;
    z-index:120;
    width:54px;
    height:54px;
    border-radius:14px;
    display:grid;
    place-items:center;
    background: linear-gradient(180deg, #ffffff, #f6f6f6);
    border:1px solid rgba(10,10,10,0.06);
    box-shadow: 0 12px 30px rgba(2,8,6,0.08);
    cursor:pointer;
    transition: transform 120ms ease, background var(--transition-fast), color var(--transition-fast);
    /* icon color in light mode */
    color: #333333;
  }
  .theme-toggle:active{ transform: translateY(2px); }

  /* when dark theme is active, make the icon white */
  body.dark .theme-toggle {
    background: linear-gradient(180deg, #0f1316, #101418);
    border:1px solid rgba(255,255,255,0.04);
    box-shadow: 0 12px 30px rgba(3,10,12,0.6);
    color: #ffffff; /* <- ensures SVG stroke (currentColor) becomes white */
  }
  .theme-toggle svg { width:22px;height:22px; display:block; }

  .theme-toggle .sr-only { position: absolute; left:-9999px; top:auto; width:1px; height:1px; overflow:hidden; }

  @media(min-width:900px){
    body{padding:30px}
    .lesson-card{padding:26px}
    .lesson-title{font-size:22px}
    .logo{width:56px;height:56px;border-radius:12px}
  }
</style>
</head>
<body>
  <div class="viewport">

    <!-- NAVBAR
         EDIT POINT: set your logo path in JS constant LOGO_SRC below.
         Example values: "logo.jpg", "images/summage-logo.jpg"
    -->
    <header class="navbar" role="banner" aria-label="Summage navbar">
      <div class="brand">
        <div class="logo" title="Summage logo" id="logoWrap">
          <img id="logoImg" src="logo.jpg" alt="Summage logo">
        </div>
        <div>
          <h1>Summage</h1>
          <small>IELTS • Reading</small>
        </div>
      </div>

      <div class="nav-action">
        <a href="readinglessons.html"><button class="btn-back">Back to menu</button></a>
      </div>
    </header>

    <!-- LESSON -->
    <main class="lesson-card" role="main" aria-labelledby="lessonTitle">
      <div class="lesson-meta">
        <div>
          <h2 id="lessonTitle" class="lesson-title">Robot Troubles</h2>
          <p class="lesson-desc">Short dialogue — focus on understanding implied meaning.</p>
        </div>
        <div class="pager" id="pager" aria-hidden="true">0 / 0</div>
      </div>

      <!-- reading content -->
      <section class="reading" aria-label="Reading passage">
        <div class="p-line">Eddy and Junior are in the living room. Lots of boxes and wires are on the table.</div>
        <div class="p-line">OK, Junior! Are you ready to start your science fair project?</div>
        <div class="p-line">Yes, I am. But I picked a simple project already. Remember? The strawberry electricity experiment?</div>
        <div class="p-line">Come on, Junior! Let's build a robot! It will be the best project at the fair!</div>
      </section>

      <!-- QUIZ CONTAINER (Renders Q1 then Q2) -->
      <section id="quizContainer" aria-live="polite">
        <!-- questions injected by JS -->
      </section>

      <!-- final area -->
      <section id="finalArea" class="final" aria-hidden="true">
        <div class="final-icon" aria-hidden="true">
          <svg width="48" height="48" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M5 13l4 4L19 7" stroke="#06a87c" stroke-width="2.4" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>
        <h3 id="finalTitle" style="margin:0;font-size:18px;color:var(--lofi-black)">Nice work!</h3>
        <p id="finalText" style="margin:0;color:var(--muted);font-size:14px">You completed the questions.</p>

        <div style="width:100%;display:flex;justify-content:center;margin-top:6px">
          <button id="finalBackBtn" class="btn-back" style="display:none">Back to menu</button>
        </div>
      </section>
    </main>

  </div>

  <!-- THEME TOGGLE (floating) -->
  <button id="themeToggle" class="theme-toggle" aria-pressed="false" aria-label="Toggle night mode">
    <span class="sr-only">Toggle night mode</span>
    <!-- themeIcon will be rendered by JS and uses stroke="currentColor" -->
    <svg id="themeIcon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"></svg>
  </button>

<script>
/* ----------------- Configuration / Editable -------------------
   Edit this constant if your logo file is located elsewhere.
   Examples: "logo.jpg", "images/summage-logo.jpg"
---------------------------------------------------------------- */
const LOGO_SRC = 'logo.jpg'; // <-- change this if needed

/* ----------------- Questions (edit or replace) -------------- */
const questions = [
  {
    id: 'q1',
    text: 'Eddy suggests building a volcano for the fair.',
    choices: [
      {id:'a', text: "Yes, that's right.", correct: false},
      {id:'b', text: "No, that's wrong.", correct: true}
    ]
  },
  {
    id: 'q2',
    text: 'What project did Junior already pick?',
    choices: [
      {id:'a', text: 'Strawberry electricity experiment', correct: true},
      {id:'b', text: 'A robot', correct: false},
      {id:'c', text: 'A volcano', correct: false},
      {id:'d', text: 'A painting', correct: false}
    ]
  }
];

/* ----------------- DOM refs ----------------- */
const quizContainer = document.getElementById('quizContainer');
const finalArea = document.getElementById('finalArea');
const finalTitle = document.getElementById('finalTitle');
const finalText = document.getElementById('finalText');
const finalBackBtn = document.getElementById('finalBackBtn');
const pager = document.getElementById('pager');
const themeToggle = document.getElementById('themeToggle');
const themeIcon = document.getElementById('themeIcon');

let currentIndex = 0;
const praise = [
  'Well done — another step toward mastery.',
  'MashAllah, you nailed it. Keep climbing.',
  'Beautiful work — focus paid off.',
  'Nice! Your comprehension is improving.',
  'Great — keep that momentum!'
];

/* ---------- Logo fallback: try to load image; if fails, put inline SVG ---------- */
(function setupLogo(){
  const logoImg = document.getElementById('logoImg');
  const logoWrap = document.getElementById('logoWrap');

  // set requested src:
  logoImg.src = LOGO_SRC;

  // if image fails, replace with a stable inline SVG
  logoImg.addEventListener('error', function onErr(){
    logoImg.removeEventListener('error', onErr);
    const svg = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 120 120" width="100%" height="100%">' +
                '<rect rx="20" width="120" height="120" fill="#06a87c"/>' +
                '<text x="50%" y="58%" font-size="64" text-anchor="middle" fill="white" font-family="Inter,Arial" font-weight="700" dy=".06em">S</text>' +
                '</svg>';
    logoWrap.innerHTML = svg;
  });
})();

/* ---------- THEME: persist & initialize ---------- */
const THEME_KEY = 'summage-theme'; // localStorage key

function setTheme(isDark){
  if(isDark){
    document.body.classList.add('dark');
    themeToggle.setAttribute('aria-pressed','true');
    themeToggle.setAttribute('aria-label','Toggle day mode');
    renderThemeIcon('sun'); // when dark, show sun to indicate switching to day
    localStorage.setItem(THEME_KEY, 'dark');
  } else {
    document.body.classList.remove('dark');
    themeToggle.setAttribute('aria-pressed','false');
    themeToggle.setAttribute('aria-label','Toggle night mode');
    renderThemeIcon('moon'); // when light, show moon to indicate switching to night
    localStorage.setItem(THEME_KEY, 'light');
  }
}

function toggleTheme(){
  const isDark = document.body.classList.contains('dark');
  setTheme(!isDark);
}

function renderThemeIcon(kind){
  // use stroke="currentColor" so icon inherits button color
  if(kind === 'moon'){
    themeIcon.innerHTML = '<path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>';
  } else {
    themeIcon.innerHTML = '<path d="M12 3v2M12 19v2M4.2 4.2l1.4 1.4M18.4 18.4l1.4 1.4M1 12h2M21 12h2M4.2 19.8l1.4-1.4M18.4 5.6l1.4-1.4M12 7a5 5 0 100 10 5 5 0 000-10z" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>';
  }
}

// init theme on load
(function initTheme(){
  const saved = localStorage.getItem(THEME_KEY);
  const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
  if(saved === 'dark' || (saved === null && prefersDark)){
    setTheme(true);
  } else {
    setTheme(false);
  }
})();

themeToggle.addEventListener('click', toggleTheme);
themeToggle.addEventListener('keydown', (e) => { if(e.key === 'Enter' || e.key === ' ') { e.preventDefault(); toggleTheme(); } });

/* ---------- Render a question into #quizContainer ---------- */
function renderQuestion(idx){
  if(!quizContainer) return;
  pager.textContent = (Math.min(idx+1, questions.length)) + ' / ' + questions.length;
  pager.setAttribute('aria-hidden','false');

  if(idx >= questions.length){
    showFinal();
    return;
  }

  const q = questions[idx];
  quizContainer.innerHTML = '';
  const wrapper = document.createElement('div');

  const questionEl = document.createElement('div');
  questionEl.className = 'question';
  questionEl.id = q.id;
  questionEl.textContent = q.text;

  const choicesEl = document.createElement('div');
  choicesEl.className = 'choices';
  choicesEl.setAttribute('role','list');
  choicesEl.setAttribute('aria-labelledby', q.id);

  q.choices.forEach(choice => {
    const c = document.createElement('div');
    c.className = 'choice';
    c.tabIndex = 0;
    c.setAttribute('role', 'button');
    c.dataset.correct = choice.correct ? 'true' : 'false';

    const fake = document.createElement('div');
    fake.className = 'fakebox';
    fake.setAttribute('aria-hidden', 'true');

    const text = document.createElement('div');
    text.textContent = choice.text;

    c.appendChild(fake);
    c.appendChild(text);

    // events
    c.addEventListener('click', () => onChoose(c));
    c.addEventListener('keydown', (e) => { if(e.key === 'Enter' || e.key === ' ') onChoose(c); });

    choicesEl.appendChild(c);
  });

  wrapper.appendChild(questionEl);
  wrapper.appendChild(choicesEl);
  quizContainer.appendChild(wrapper);

  const firstChoice = quizContainer.querySelector('.choice');
  if(firstChoice) firstChoice.focus();
}

/* ---------- When user chooses an answer ---------- */
let answered = false;
function onChoose(el){
  if(answered) return;
  answered = true;

  const choices = Array.from(el.closest('.choices').querySelectorAll('.choice'));
  choices.forEach(c => {
    const correct = c.dataset.correct === 'true';
    if(c === el){
      c.classList.add('selected');
      if(correct) c.classList.add('correct'); else c.classList.add('incorrect');
    } else {
      if(correct) c.classList.add('correct');
    }
    c.style.pointerEvents = 'none';
  });

  setTimeout(() => {
    quizContainer.innerHTML = '';
    currentIndex++;
    answered = false;
    renderQuestion(currentIndex);
  }, 700);
}

/* ---------- When all done ---------- */
function showFinal(){
  if(quizContainer){
    quizContainer.style.display = 'none';
  }
  pager.setAttribute('aria-hidden','true');
  finalTitle.textContent = pickRandom(['Nice work!', 'Well done!', 'Excellent!']);
  finalText.textContent = pickRandom(praise);
  finalArea.classList.add('show');
  finalArea.setAttribute('aria-hidden','false');
  finalBackBtn.style.display = 'inline-block';
}

/* ---------- helpers ---------- */
function pickRandom(arr){ return arr[Math.floor(Math.random()*arr.length)]; }

/* ---------- initialize ---------- */
renderQuestion(currentIndex);

</script>
</body>
</html>
