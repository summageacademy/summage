<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>GPA Calculator - Summage Academy</title>
  <link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">
  <link rel="stylesheet" href="/css/menu.css">
  <link rel="stylesheet" href="/css/gpa.css">
  <style>
    /* Sticky Bottom Leaderboard - Desktop Only */
    .bottom-leaderboard {
        position: fixed;
        bottom: -120px; /* Start hidden below screen */
        left: 50%;
        transform: translateX(-50%);
        width: 100%;
        max-width: 780px;
        z-index: 9999;
        pointer-events: none; /* Only ad and close button are clickable */
        transition: bottom 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        padding: 16px;
    }

    .bottom-leaderboard.visible {
        bottom: 20px;
        pointer-events: auto;
    }

    /* Wrapper to allow close button to overlap */
    .ad-wrapper {
        position: relative;
        width: 728px;
        height: 90px;
        margin: 0 auto;
        pointer-events: auto; /* Enable interaction with ad and close */
    }

    /* Actual ad content */
    .ad-content {
        width: 100%;
        height: 100%;
        background: white;
        border-radius: 16px;
        box-shadow: 
            0 10px 30px rgba(0, 0, 0, 0.15),
            0 0 0 2px rgba(242, 75, 11, 0.2); /* Your brand orange glow */
        overflow: hidden;
    }

    /* Close button - beautifully overlaid on top-right corner */
    .ad-close-btn {
        position: absolute;
        top: -14px;
        right: -14px;
        width: 36px;
        height: 36px;
        background: #ffffff;
        color: #f24b0b;
        border: 3px solid #f24b0b;
        border-radius: 50%;
        font-size: 22px;
        font-weight: bold;
        line-height: 30px;
        cursor: pointer;
        z-index: 10;
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.2);
        transition: all 0.25s ease;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .ad-close-btn:hover {
        background: #f24b0b;
        color: white;
        transform: scale(1.1);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
    }

    .ad-close-btn:active {
        transform: scale(0.95);
    }

    /* Show only on desktop */
    @media (min-width: 1024px) {
        .bottom-leaderboard {
            opacity: 1;
            visibility: visible;
        }
    }

    @media (max-width: 1023px) {
        .bottom-leaderboard {
            display: none;
        }
    }
  </style>
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-LZP4KSPR1V"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-LZP4KSPR1V');
  </script>
</head>

<body class="no-scroll">
  <div id="loader" role="status" aria-label="Loading">
    <div class="spinner" aria-hidden="true"></div>
  </div>

  <div class="header">
    <div class="title-group">
      <h1>GPA Calculator</h1>
      <h2>Add subjects and grades — GPA updates instantly</h2>
    </div>
    <a href="/main-menu/" class="back-btn">Back</a>
    <button class="hamburger-btn" id="hamburgerBtn" aria-label="Open menu">
      <span class="hamburger-icon"></span>
    </button>
  </div>

  <div class="gpa-wrapper">
    <div class="gpa-card">
      <div class="system-selector">
        <label for="gradingSystem">Grading System:</label>
        <select id="gradingSystem">
          <option value="4.0">4.0 Scale (USA)</option>
          <option value="5.0" selected>5.0 Scale (Uzbekistan, Russia)</option>
          <option value="10.0">10.0 Scale (India, Turkey)</option>
          <option value="100">Percentage (100%)</option>
        </select>
      </div>

      <!-- PC LAYOUT -->
      <div class="gpa-layout-pc">
        <div class="input-column">
          <div class="add-course">
            <div class="input-row">
              <div class="input-box">
                <input type="text" id="subject" placeholder="Subject (optional)" maxlength="25">
              </div>
              <div class="input-box">
                <!-- PC: Native select -->
                <select id="grade-pc" class="grade-select-pc" aria-label="Select grade"></select>
              </div>
              <button id="addBtn" class="add-circle" aria-label="Add subject">+</button>
            </div>
          </div>
          <div class="result-box result-box-pc">
            <div class="result-line gpa-line">
              <span>Your GPA</span>
              <strong id="gpaValue">—</strong>
            </div>
            <button id="resetBtn" class="reset-text">Clear All</button>
          </div>
        </div>
        <div class="info-column">
          <div class="instructions">
            <h3>How to use:</h3>
            <ol>
              <li>Choose your grading system above</li>
              <li>Enter subject name (optional)</li>
              <li>Select your grade</li>
              <li>Tap <strong>+</strong> to add</li>
              <li>GPA updates automatically!</li>
            </ol>
          </div>
          <div id="coursesList" class="courses-list courses-list-pc" aria-live="polite"></div>
        </div>
      </div>

      <!-- MOBILE LAYOUT -->
      <div class="gpa-layout-mobile">
        <div class="add-course">
          <div class="input-row">
            <div class="input-box">
              <input type="text" id="subject-mobile" placeholder="Subject (optional)" maxlength="25">
            </div>
            <div class="input-box">
              <!-- MOBILE: Custom dropdown -->
              <div id="customGradeDropdown" class="custom-dropdown">
                <button id="gradeDisplay" class="grade-display" aria-haspopup="listbox" aria-expanded="false">
                  Grade
                </button>
                <ul id="gradeOptions" class="grade-options" role="listbox" aria-label="Grade options" style="display: none;"></ul>
              </div>
              <!-- Hidden native select for JS sync -->
              <select id="grade-mobile" class="grade-select-mobile" style="display: none;" aria-label="Select grade"></select>
            </div>
            <button id="addBtn-mobile" class="add-circle" aria-label="Add subject">+</button>
          </div>
        </div>
        <div id="coursesList-mobile" class="courses-list" aria-live="polite"></div>
        <div class="result-box">
          <div class="result-line gpa-line">
            <span>Your GPA</span>
            <strong id="gpaValue-mobile">—</strong>
          </div>
          <button id="resetBtn-mobile" class="reset-text">Clear All</button>
        </div>
        <div class="hint">
          <p>Tap "+" to add a subject. GPA is the average of all grades.</p>
        </div>
      </div>
    </div>
  </div>

  <!-- MOBILE NAV -->
  <nav class="bottom-nav" aria-label="Mobile navigation">
    <a class="nav-btn" href="/blog-posts/" aria-label="Blogs"><img src="../icons/blogfooter.png" alt=""></a>
    <a class="nav-btn center" href="/main-menu/" aria-label="Home"><img src="../icons/home.png" alt=""></a>
    <a class="nav-btn" href="/profile/" aria-label="Profile"><img src="../icons/profile-user.png" alt=""></a>
  </nav>

  <!-- MOBILE SIDEBAR -->
  <div id="sidebarOverlay" class="sidebar-overlay" tabindex="-1"></div>
  <aside id="sidebar" class="sidebar" role="dialog" aria-modal="true" aria-labelledby="sidebarTitle">
    <div class="sidebar-header">
      <h3 id="sidebarTitle">Menu & Tools</h3>
      <button class="close-btn" id="sidebarCloseBtn" aria-label="Close menu">×</button>
    </div>
    <div class="section">
      <a href="/gpa-calculator/" class="item"><div class="item-icon">G</div><div class="item-label">GPA Calculator</div></a>
      <a href="/research-hub/" class="item"><div class="item-icon">R</div><div class="item-label">Research Hub</div></a>
      <a href="/study-guide/" class="item"><div class="item-icon">S</div><div class="item-label">Study Guide</div></a>
    </div>
    <div class="section">
      <a href="/about/" class="item"><div class="item-icon">A</div><div class="item-label">About Us</div></a>
      <a href="/contacts/" class="item"><div class="item-icon">C</div><div class="item-label">Contact Us</div></a>
    </div>
    <div class="section">
      <a href="/privacy/" class="item"><div class="item-icon">P</div><div class="item-label">Privacy Policy</div></a>
      <a href="/terms/" class="item"><div class="item-icon">T</div><div class="item-label">Terms & Conditions</div></a>
    </div>
    <div style="flex:1"></div>
    <div class="section" style="padding-bottom:12px;">
      <div style="font-size:.9rem;color:#6b6b6b;">Version 2.0</div>
    </div>
  </aside>

  <!-- PC SIDEBAR -->
  <aside class="pc-sidebar">
    <div class="sidebar-header"><h3>Menu & Tools</h3></div>
    <div class="sidebar-quote" id="pcQuote"><p class="quote-text"></p><small class="quote-author"></small></div>
    <div class="section">
      <a href="/gpa-calculator/" class="item"><div class="item-icon">G</div><div class="item-label">GPA Calculator</div></a>
      <a href="/profile/" class="item"><div class="item-icon">P</div><div class="item-label">Profile</div></a>
      <a href="/online-quizzes/" class="item">
        <div class="item-icon">O</div>
        <div class="item-label">Online Quizzes</div>
      </a>
    </div>
    <div class="section">
      <a href="/about/" class="item"><div class="item-icon">A</div><div class="item-label">About Us</div></a>
      <a href="/contacts/" class="item"><div class="item-icon">C</div><div class="item-label">Contact Us</div></a>
    </div>
    <div class="section">
      <a href="/privacy/" class="item"><div class="item-icon">P</div><div class="item-label">Privacy Policy</div></a>
      <a href="/terms/" class="item"><div class="item-icon">T</div><div class="item-label">Terms & Conditions</div></a>
    </div>
    <div style="flex:1"></div>
    <div class="version">Version 2.0</div>
  </aside>

  <!-- Universal Sticky Bottom Leaderboard Ad (Desktop Only) - Fixed Close Button -->
  <div id="bottom-leaderboard-ad" class="bottom-leaderboard">
      <div class="ad-wrapper">
          <!-- PLACE YOUR 728x90 AD CODE HERE -->
          <!-- Example placeholder - replace with real ad code -->
          <div class="ad-content">
              <div id="7SAD1569536254B1906" data-7pub="7SAD1569536254B1906"></div>
              <script src="https://code.adclickppc.com/7s-banner-ad.js"></script>
              <script>
              (function() {
                initBannerAd(['7SAD1569536254B1906', 'banner',  5])
                }())
              </script>
          </div>

          <!-- CLOSE BUTTON - Now properly overlaid on top -->
          <button class="ad-close-btn" aria-label="Close ad">×</button>
      </div>
  </div>

  <script>
        // Auto show with smooth slide-up + close functionality
        document.addEventListener('DOMContentLoaded', function () {
            const ad = document.getElementById('bottom-leaderboard-ad');
            
            if (window.innerWidth >= 1024) {
                // Slide up after 1 second
                setTimeout(() => {
                    ad.classList.add('visible');
                }, 1000);
            }

            // Close button
            const closeBtn = ad.querySelector('.ad-close-btn');
            if (closeBtn) {
                closeBtn.addEventListener('click', () => {
                    ad.classList.remove('visible');
                    ad.style.bottom = '-120px';
                    setTimeout(() => {
                        ad.style.visibility = 'hidden';
                        ad.style.pointerEvents = 'none';
                    }, 600);
                });
            }
        });
  </script>
  <script src="/js/menu.js"></script>
  <script src="/js/gpa.js"></script>

  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

  <script src="/firebase-init.js"></script>
  <script src="/auth-guard.js"></script>
</body>
</html>